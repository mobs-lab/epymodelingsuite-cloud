# Environment variables for the epymodelingsuite-cloud pipeline
# Source with: source .env

# Google Cloud Infrastructure
export PROJECT_ID=mobs-jessica
export REGION=us-central1
export REPO_NAME=epymodelingsuite-repo
export BUCKET_NAME=gs_mobs_jessica

# Docker image configuration
export IMAGE_NAME=epymodelingsuite
export IMAGE_TAG=latest

# GitHub Private Repositories
# Forecast data repository (format: owner/repo)
export GITHUB_FORECAST_REPO=mobs-lab/flu-forecast-epydemix

# Modeling suite package repository (format: owner/repo)
export GITHUB_MODELING_SUITE_REPO=mobs-lab/flumodelingsuite
# Branch or commit to build from
export GITHUB_MODELING_SUITE_REF=minami-dev

# Workflow run parameters
export DIR_PREFIX=pipeline/flu/
export MAX_PARALLELISM=100
export TASK_COUNT_PER_NODE=1  # Max tasks per VM (1 = dedicated VM per task)

# Batch machine configuration - Stage A (Dispatcher)
export STAGE_A_CPU_MILLI=1000
export STAGE_A_MEMORY_MIB=3072
export STAGE_A_MACHINE_TYPE=""  # Optional: e2-standard-2, n2-standard-4, etc. Empty = auto-select

# Batch machine configuration - Stage B (Runner)
export STAGE_B_CPU_MILLI=1000
export STAGE_B_MEMORY_MIB=4096
export STAGE_B_MACHINE_TYPE=""  # Optional: e2-standard-2, c4d-standard-2, etc. Empty = auto-select

# EXP_ID is required when running the pipeline.
# EXP_ID=my-experiment-id make run-workflow

# Note: GitHub PAT should be stored in Secret Manager (for cloud) or in .env.local
# DO NOT store it in this file
# Create secret: echo -n "your_pat" | gcloud secrets create github-pat --data-file=-
